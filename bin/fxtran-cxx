#!/usr/bin/env perl 

use warnings;

use FindBin qw ($Bin);
use lib "$Bin/../lib";

use Fxtran::Common;

use Getopt::Long;

use strict;

use Fxtran::AR;

my @opts_f = qw ();
my @opts_s = qw (config prefix);

my %opts;

&GetOptions
(
  (map { ($_, \$opts{$_}) } @opts_f),
  (map { ("$_=s", \$opts{$_}) } @opts_s),
);

my @argv = @ARGV;

if ($opts{prefix})
  {
    push @argv, "-L$opts{prefix}/lib", '-lACDC';
  }

if (grep { $_ eq '-c' } @argv)
  {
    exec (@argv);
  }

&Fxtran::AR::expandObjects (\@argv);

exec (@argv);


